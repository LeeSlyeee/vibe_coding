import{o as y,q as _,c as l,a as t,n as h,f as u,t as a,e as g,F as k,r as w,p as D,k as N,i,l as n}from"./index-D6lzrY5p.js";const $={class:"min-h-screen bg-slate-50 p-6 font-sans"},C={class:"mb-10 flex items-center gap-6"},I={class:"bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden"},L={class:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50"},V={class:"text-lg text-slate-500"},B={class:"font-bold text-slate-900 text-xl"},F={key:0,class:"p-6 bg-red-50 border-b border-red-100 text-center"},S={class:"text-red-500 text-sm"},j={key:1,class:"p-20 text-center"},J={key:2,class:"w-full text-left border-collapse"},M={class:"divide-y divide-slate-100 text-base"},O=["onClick"],P={class:"px-8 py-6"},T={class:"flex flex-col"},q={class:"font-bold text-slate-800 text-lg"},E={class:"text-sm text-slate-400 font-mono"},R={class:"px-8 py-6 text-slate-600"},U={class:"px-8 py-6 text-slate-500"},z={class:"px-8 py-6 text-center font-medium"},A={class:"px-8 py-6 text-center"},G={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-red-100 text-red-800"},H={key:1,class:"text-slate-400"},K={key:0},Y={__name:"PatientListView",setup(Q){const f=N(),r=i([]),x=i(!0),d=i(""),c=i(!0),b=async()=>{c.value&&(x.value=!0),d.value="";try{const e=(await D.get("diaries/staff/patients/")).data;JSON.stringify(e)!==JSON.stringify(r.value)&&(r.value=e)}catch(s){c.value&&(console.error("í™˜ì ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:",s),d.value=`ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ${s.message}`,s.response&&(d.value+=` (${s.response.status})`))}finally{x.value=!1,c.value=!1}},m=s=>s?new Date(s).toLocaleDateString():"-",v=s=>{f.push(`/admin/patients/${s}`)};let p=null;return y(()=>{b(),p=setInterval(b,5e3)}),_(()=>{p&&clearInterval(p)}),(s,e)=>(n(),l("div",$,[t("header",C,[t("button",{onClick:e[0]||(e[0]=o=>h(f).push("/admin/dashboard")),class:"flex items-center text-slate-500 hover:text-slate-800 transition text-lg"},[...e[1]||(e[1]=[t("span",{class:"mr-2 text-xl"},"â†",-1),u(" ëŒ€ì‹œë³´ë“œ ",-1)])]),e[2]||(e[2]=t("h1",{class:"text-4xl font-extrabold text-slate-800 tracking-tight"},"ë“±ë¡ëœ í™˜ì ëª©ë¡",-1))]),t("div",I,[t("div",L,[e[5]||(e[5]=t("div",{class:"relative w-96"},[t("input",{type:"text",placeholder:"ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼ ê²€ìƒ‰",class:"w-full pl-12 pr-6 py-4 rounded-xl border border-slate-300 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 text-lg shadow-sm"}),t("span",{class:"absolute left-4 top-4 text-slate-400 text-xl"},"ğŸ”")],-1)),t("div",V,[e[3]||(e[3]=u(" ì´ ",-1)),t("span",B,a(r.value.length),1),e[4]||(e[4]=u("ëª… ê²€ìƒ‰ë¨ ",-1))])]),d.value?(n(),l("div",F,[e[6]||(e[6]=t("p",{class:"text-red-600 font-bold mb-1"},"âš ï¸ ì˜¤ë¥˜ ë°œìƒ",-1)),t("p",S,a(d.value),1)])):g("",!0),x.value?(n(),l("div",j,[...e[7]||(e[7]=[t("div",{class:"spinner border-4 border-slate-200 border-t-indigo-600 rounded-full w-12 h-12 mx-auto animate-spin"},null,-1),t("p",{class:"mt-4 text-slate-500"},"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤...",-1)])])):(n(),l("table",J,[e[11]||(e[11]=t("thead",{class:"bg-slate-50 text-slate-500 text-sm uppercase font-semibold"},[t("tr",null,[t("th",{class:"px-8 py-6"},"í™˜ìëª… (ID)"),t("th",{class:"px-8 py-6"},"ì´ë©”ì¼"),t("th",{class:"px-8 py-6"},"ë“±ë¡ì¼"),t("th",{class:"px-8 py-6 text-center"},"ì´ ì¼ê¸°"),t("th",{class:"px-8 py-6 text-center"},"ìœ„í—˜ ê°ì§€"),t("th",{class:"px-8 py-6 text-center"},"ìƒíƒœ"),t("th",{class:"px-8 py-6"},"ê´€ë¦¬")])],-1)),t("tbody",M,[(n(!0),l(k,null,w(r.value,o=>(n(),l("tr",{key:o.id,class:"hover:bg-indigo-50/30 transition cursor-pointer",onClick:W=>v(o.id)},[t("td",P,[t("div",T,[t("span",q,a(o.name||"ì‹¤ëª…ì—†ìŒ"),1),t("span",E,"("+a(o.username)+")",1)])]),t("td",R,a(o.email),1),t("td",U,a(m(o.joined_at)),1),t("td",z,a(o.diary_count),1),t("td",A,[o.risk_count>0?(n(),l("span",G,a(o.risk_count)+"íšŒ ",1)):(n(),l("span",H,"-"))]),e[8]||(e[8]=t("td",{class:"px-8 py-6 text-center"},[t("span",{class:"bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full font-bold"},"í™œë™ì¤‘")],-1)),e[9]||(e[9]=t("td",{class:"px-8 py-6"},[t("button",{class:"text-indigo-600 hover:text-indigo-900 font-bold text-base border border-indigo-200 bg-indigo-50 px-4 py-2 rounded-lg hover:bg-indigo-100 transition"}," ìƒì„¸ë³´ê¸° ")],-1))],8,O))),128)),r.value.length===0?(n(),l("tr",K,[...e[10]||(e[10]=[t("td",{colspan:"7",class:"px-8 py-16 text-center text-slate-400 text-lg"}," ë“±ë¡ëœ í™˜ìê°€ ì—†ìŠµë‹ˆë‹¤. ",-1)])])):g("",!0)])]))])]))}};export{Y as default};
