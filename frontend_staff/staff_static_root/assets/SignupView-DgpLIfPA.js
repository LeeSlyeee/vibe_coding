import{u as k,o as V,c as u,a as l,w as C,b as s,v as M,F as S,r as _,d as n,t as m,e as j,f as c,g as q,h as U,i as p,j as A,k as N,l as f}from"./index-D6lzrY5p.js";const B={class:"flex min-h-screen flex-col items-center justify-center bg-gray-100 p-4"},D={class:"w-full max-w-md rounded-lg bg-white p-8 shadow-md"},F=["value"],L={key:0,class:"text-sm text-red-600 font-semibold"},R=["disabled"],T={class:"mt-4 text-center text-sm text-gray-600"},O={__name:"SignupView",setup($){const o=p({center_id:"",first_name:"",username:"",email:"",password:"",passwordConfirm:""}),v=p([]),r=p(""),i=p(!1),g=k(),y=N();V(async()=>{v.value=await g.fetchCenters()});const x=async()=>{if(r.value="",o.value.password!==o.value.passwordConfirm){r.value="비밀번호가 일치하지 않습니다.";return}if(!o.value.center_id){r.value="소속 센터를 선택해주세요.";return}i.value=!0;try{await g.register({center_id:o.value.center_id,first_name:o.value.first_name,username:o.value.username,email:o.value.email,password:o.value.password}),alert("회원가입이 완료되었습니다. 로그인해주세요."),y.push("/login")}catch(a){if(console.error(a),a.response&&a.response.data){const e=a.response.data;if(Array.isArray(e))r.value=e.join(`
`);else if(typeof e=="object"){const d=Object.keys(e);if(d.length>0){const t=d[0],b=Array.isArray(e[t])?e[t].join(", "):e[t];if(t==="non_field_errors"||t==="detail")r.value=b;else{const w={username:"아이디",password:"비밀번호",email:"이메일",first_name:"이름",center_id:"소속 센터"}[t]||t;r.value=`${w}: ${b}`}}else r.value="알 수 없는 오류가 발생했습니다."}else r.value=String(e)}else r.value="서버 연결 오류가 발생했습니다."}finally{i.value=!1}};return(a,e)=>{const d=A("router-link");return f(),u("div",B,[l("div",D,[e[15]||(e[15]=l("h2",{class:"mb-6 text-center text-2xl font-bold text-gray-800"},"회원가입",-1)),l("form",{onSubmit:C(x,["prevent"]),class:"space-y-4"},[l("div",null,[e[7]||(e[7]=l("label",{class:"block text-sm font-medium text-gray-700"},"소속 센터",-1)),s(l("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.center_id=t),class:"mt-1 block w-full rounded border border-gray-300 p-2 focus:border-indigo-500 focus:ring-indigo-500",required:""},[e[6]||(e[6]=l("option",{value:"",disabled:""},"센터를 선택하세요",-1)),(f(!0),u(S,null,_(v.value,t=>(f(),u("option",{key:t.id,value:t.id},m(t.name)+" ("+m(t.region)+") ",9,F))),128))],512),[[M,o.value.center_id]])]),l("div",null,[e[8]||(e[8]=l("label",{class:"block text-sm font-medium text-gray-700"},"이름",-1)),s(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.first_name=t),type:"text",class:"mt-1 block w-full rounded border border-gray-300 p-2 focus:border-indigo-500 focus:ring-indigo-500",required:"",placeholder:"실명을 입력하세요"},null,512),[[n,o.value.first_name]])]),l("div",null,[e[9]||(e[9]=l("label",{class:"block text-sm font-medium text-gray-700"},"아이디",-1)),s(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.username=t),type:"text",class:"mt-1 block w-full rounded border border-gray-300 p-2 focus:border-indigo-500 focus:ring-indigo-500",required:"",placeholder:"영문, 숫자 포함"},null,512),[[n,o.value.username]])]),l("div",null,[e[10]||(e[10]=l("label",{class:"block text-sm font-medium text-gray-700"},"이메일",-1)),s(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.email=t),type:"email",class:"mt-1 block w-full rounded border border-gray-300 p-2 focus:border-indigo-500 focus:ring-indigo-500",required:"",placeholder:"example@email.com"},null,512),[[n,o.value.email]])]),l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium text-gray-700"},"비밀번호",-1)),s(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.password=t),type:"password",class:"mt-1 block w-full rounded border border-gray-300 p-2 focus:border-indigo-500 focus:ring-indigo-500",required:"",placeholder:"비밀번호 입력"},null,512),[[n,o.value.password]])]),l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium text-gray-700"},"비밀번호 확인",-1)),s(l("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.passwordConfirm=t),type:"password",class:"mt-1 block w-full rounded border border-gray-300 p-2 focus:border-indigo-500 focus:ring-indigo-500",required:"",placeholder:"비밀번호 재입력"},null,512),[[n,o.value.passwordConfirm]])]),r.value?(f(),u("div",L,m(r.value),1)):j("",!0),l("button",{type:"submit",class:"w-full rounded bg-indigo-600 px-4 py-2 font-bold text-white hover:bg-indigo-700 transition",disabled:i.value},m(i.value?"가입 중...":"회원가입 완료"),9,R)],32),l("p",T,[e[14]||(e[14]=c(" 이미 계정이 있으신가요? ",-1)),q(d,{to:"/login",class:"text-indigo-600 hover:underline"},{default:U(()=>[...e[13]||(e[13]=[c("로그인하기",-1)])]),_:1})])])])}}};export{O as default};
