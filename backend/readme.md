# Mood Diary AI ë°±ì—”ë“œ

ë¬´ë“œ ë‹¤ì´ì–´ë¦¬(Mood Diary) ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ Flask ê¸°ë°˜ ë°±ì—”ë“œë¡œ, ê³ ê¸‰ ê°ì • ë¶„ì„ ë° ê³µê°í˜• AI ì½”ë©˜íŠ¸ ìƒì„± ê¸°ëŠ¥ì„ íŠ¹ì§•ìœ¼ë¡œ í•©ë‹ˆë‹¤.

## ðŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1. ê°ì • ë¶„ì„ (LSTM)

- **ëª¨ë¸**: 128 ìœ ë‹›ì„ ê°€ì§„ ì–‘ë°©í–¥ LSTM (Bidirectional LSTM).
- **í´ëž˜ìŠ¤**: 5ê°€ì§€ ê°ì • (í–‰ë³µí•´, í‰ì˜¨í•´, ê·¸ì €ê·¸ëž˜, ìš°ìš¸í•´, í™”ê°€ë‚˜).
- **í›ˆë ¨ ë°ì´í„°**: ì•½ 47,000ê°œì˜ ê²°í•©ëœ ë°ì´í„°ì…‹.
  - `GoEmotions-Korean`: 50,000ê°œ ì´ìƒì˜ ë¼ë²¨ë§ëœ ë¬¸ìž¥ (Google).
  - `ê°ì„±ëŒ€í™”ë§ë­‰ì¹˜`: 36,000ê°œ ì´ìƒì˜ ëŒ€í™” ìŒ (AI Hub).
  - `User Data`: 10,000ê°œ ì´ìƒì˜ ì‹¤ì œ ì¼ê¸° ë°ì´í„° (íŒŒì¸ íŠœë‹).
- **ì„±ëŠ¥**: ì €ìž¥ëœ ëª¨ë¸(`emotion_model.h5`)ì„ í†µí•´ ë†’ì€ ì •í™•ë„ ì œê³µ.

### 2. ìƒì„±í˜• AI ì½”ë©˜íŠ¸ (ê³ ê¸‰ í•˜ì´ë¸Œë¦¬ë“œ ì‹œìŠ¤í…œ)

- **ì‹œìŠ¤í…œ**: 3ë‹¨ê³„ ìš°ì„ ìˆœìœ„ ì•„í‚¤í…ì²˜.
  1.  **ì•ˆì „ìž¥ì¹˜ (ê·œì¹™ ê¸°ë°˜)**: "ì‹œí—˜", "ì´ë³„"ê³¼ ê°™ì€ ì¤‘ìš” í‚¤ì›Œë“œì— ëŒ€í•´ ì¦‰ê°ì ì´ê³  ë†’ì€ í’ˆì§ˆì˜ ì¡°ì–¸ ì œê³µ.
  2.  **KoGPT-2 (LLM)**: SKTì˜ `kogpt2-base-v2` ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì°½ì˜ì ì´ê³  ì‹œì ì¸ ë‹µë³€ ìƒì„±.
  3.  **Seq2Seq (ëŒ€ì²´ ëª¨ë¸)**: ê²½ëŸ‰ ë°±ì—… ëª¨ë¸.
- **ê¸°ëŠ¥**: ì‚¬ìš©ìž ì¼ê¸°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê³µê°í•˜ê³  ë§¥ë½ì„ íŒŒì•…í•˜ì—¬ ì¡°ì–¸ ìƒì„±.
- **ìµœì í™”**: íš¨ìœ¨ì ì¸ í•œêµ­ì–´ í† í°í™”ë¥¼ ìœ„í•´ `PreTrainedTokenizerFast` ì‚¬ìš©.
- **íŒŒì¼**: `comment_bank.json` (ê·œì¹™), `comment_model.h5` (ë ˆê±°ì‹œ).

### 3. ëŠ¥ë™í˜• í•™ìŠµ ë° í‚¤ì›Œë“œ ì¶”ì¶œ

- **í‚¤ì›Œë“œ ì¶”ì¶œ**: ì‚¬ìš©ìž ì¼ê¸°ì—ì„œ ê°ì •ë³„ í‚¤ì›Œë“œë¥¼ ìžë™ìœ¼ë¡œ í•™ìŠµ.
- **ì§€ì‹ ë² ì´ìŠ¤**: `EmotionKeyword` í…Œì´ë¸”ì— í˜„ìž¬ **30,000ê°œ ì´ìƒì˜ í•™ìŠµëœ í‚¤ì›Œë“œ** ë³´ìœ .
- **ì§€ì†ì  í•™ìŠµ**: ì¼ê¸° ë°ì´í„°ê°€ ìŒ“ì¼ìˆ˜ë¡ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì´ í–¥ìƒë¨.

---

## ðŸ›  ì„¤ì • ë° ì‹¤í–‰

### A. í™˜ê²½ ì„¤ì •

```bash
cd backend
source venv/bin/activate
```

### B. ì„œë²„ ì‹¤í–‰

```bash
python app.py
```

- ì„œë²„ëŠ” `http://127.0.0.1:5000`ì—ì„œ ì‹œìž‘ë©ë‹ˆë‹¤.
- API ë¬¸ì„œ: `app.py`ì˜ `/api/` ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### C. ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•œ AI ê´€ë¦¬

- **ì „ì²´ ëª¨ë¸ ìž¬í›ˆë ¨**: `python retrain_model.py` (ê°•ì œ ìž¬í›ˆë ¨)
- **ê¸°ì¡´ ë°ì´í„° ì¼ê´„ ì—…ë°ì´íŠ¸**: `python batch_update_ai.py` (ê¸°ì¡´ ì¼ê¸°ì— ìƒˆë¡œìš´ AI ë¶„ì„ ì ìš©)
- **ì½”ë©˜íŠ¸ ê²€ì¦**: `python verify_comments.py`

## ðŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

- `ai_analysis.py`: í•µì‹¬ AI ë¡œì§ (í›ˆë ¨, ì¶”ë¡ , ì§€ì†ì„± ê´€ë¦¬).
- `app.py`: Flask REST API ë¼ìš°íŠ¸.
- `models.py`: SQLAlchemy ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ (`User`, `Diary`, `EmotionKeyword`).
- `*.h5 / *.pickle`: ìµœì í™”ëœ AI ëª¨ë¸ íŒŒì¼.

## ðŸ”„ ìµœê·¼ ì—…ë°ì´íŠ¸ (2026.01.15)

### 1. AI ëª¨ë¸ ì—…ê·¸ë ˆì´ë“œ (Polyglot-Ko 1.3B)

- ê¸°ì¡´ **KoGPT-2** (1.2ì–µ íŒŒë¼ë¯¸í„°)ì—ì„œ **Polyglot-Ko 1.3B** (13ì–µ íŒŒë¼ë¯¸í„°)ë¡œ êµì²´í–ˆìŠµë‹ˆë‹¤.
- **í–¥ìƒëœ ì **: ë¬¸ë§¥ ì´í•´ë ¥ ëŒ€í­ ì¦ê°€, ë” ìžì—°ìŠ¤ëŸ½ê³  í’ë¶€í•œ í•œêµ­ì–´ í‘œí˜„ ê°€ëŠ¥.

### 2. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ê°•í™” (Persona ì ìš©)

- AIì—ê²Œ **"ë‹¤ì •í•˜ê³  ê³µê° ëŠ¥ë ¥ì´ ë›°ì–´ë‚œ ì‹¬ë¦¬ ìƒë‹´ì‚¬"** íŽ˜ë¥´ì†Œë‚˜ë¥¼ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤.
- ë‹¨ìˆœí•œ ì‘ë‹µì„ ë„˜ì–´, ì‚¬ìš©ìžì˜ ì¼ê¸° ë‚´ìš©ì— ê¹Šì´ ê³µê°í•˜ê³  ìœ„ë¡œí•˜ëŠ” 2~3ë¬¸ìž¥ì˜ ë‹µë³€ì„ ìƒì„±í•˜ë„ë¡ ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤.

### 3. í´ë¼ìš°ë“œ ë°°í¬ ìµœì í™” (Oracle Cloud)

- **ë©”ëª¨ë¦¬ ìµœì í™”**: ëŒ€í˜• ì–¸ì–´ ëª¨ë¸(LLM) êµ¬ë™ì„ ìœ„í•œ ë©”ëª¨ë¦¬ ê´€ë¦¬ ë¡œì§ ì ìš©.
- **ì•ˆì „ì„±**: `SKIP_TRAINING=true` í™˜ê²½ì—ì„œë„ í•„ìˆ˜ AI ë°ì´í„°(ê°ì • ì€í–‰ ë“±)ëŠ” ë¡œë”©ë˜ë„ë¡ ìˆ˜ì •.
- **íƒ€ìž„ì•„ì›ƒ ì„¤ì •**: LLM ì¶”ë¡  ì‹œê°„ì„ ê³ ë ¤í•˜ì—¬ Gunicorn íƒ€ìž„ì•„ì›ƒì„ **120ì´ˆ**ë¡œ í™•ìž¥.

### 4. Gemini API & OCI ì„±ëŠ¥ ìµœì í™” (2026.01.17 ~ 2026.01.18)

- **í†µí•© ë¶„ì„ ì‹œìŠ¤í…œ (Ultra Fast Mode)**:
  - ê¸°ì¡´ ë¡œì»¬ LSTM ë¶„ì„ ëŒ€ì‹  **Gemini 1.5 Flash**ë¥¼ ì´ìš©í•œ í†µí•© ë¶„ì„(ê°ì • ë¶„ë¥˜ + ì½”ë©˜íŠ¸ ìƒì„±)ì„ ë„ìž…í–ˆìŠµë‹ˆë‹¤.
  - **ì„±ëŠ¥ í–¥ìƒ**: ë¶„ì„ ëŒ€ê¸° ì‹œê°„ì„ ì•½ **15ì´ˆì—ì„œ 3ì´ˆ ë¯¸ë§Œ**ìœ¼ë¡œ ëŒ€í­ ë‹¨ì¶•í–ˆìŠµë‹ˆë‹¤.
  - **OCI ìµœì í™” (RAM ë‹¤ì´ì–´íŠ¸)**: Gemini ëª¨ë“œ í™œì„±í™” ì‹œ ë©”ëª¨ë¦¬ë¥¼ ë§Žì´ ì ìœ í•˜ëŠ” ë¡œì»¬ ë”¥ëŸ¬ë‹ ë¼ì´ë¸ŒëŸ¬ë¦¬(TensorFlow, PyTorch) ë¡œë”©ì„ ì°¨ë‹¨í•˜ì—¬ 100ëª… ì´ìƒì˜ ë™ì‹œ ì ‘ì† í™˜ê²½ì—ì„œë„ ì•ˆì •ì ì¸ ìš´ì˜ì´ ê°€ëŠ¥í•˜ë„ë¡ ê°œì„ í–ˆìŠµë‹ˆë‹¤.
- **ë°ì´í„° ê¸°ë°˜ í†µê³„ ë¦¬í¬íŠ¸ (Insight v2)**:
  - **AI ìš°ì„  ê°ì • ì‹œìŠ¤í…œ**: í†µê³„ ì°¨íŠ¸ì—ì„œ ì‚¬ìš©ìž ì„ íƒë³´ë‹¤ AIê°€ ê°ê´€ì ìœ¼ë¡œ ë¶„ì„í•œ ê°ì • ì ìˆ˜ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ë°˜ì˜í•˜ì—¬ ë” ì •êµí•œ ë¶„ì„ ë¦¬í¬íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
  - **KST íƒ€ìž„ì¡´ ë³´ì •**: ì„œë²„ ì‹œê°„(UTC)ê³¼ ìƒê´€ì—†ì´ í•œêµ­ í‘œì¤€ì‹œ(+9ì‹œê°„) ê¸°ì¤€ìœ¼ë¡œ ì •í™•í•œ ë‚ ì§œë³„ í†µê³„ë¥¼ ì‚°ì¶œí•©ë‹ˆë‹¤.
- **ížˆìŠ¤í† ë¦¬ íŒ¨í„´ ê¸°ë°˜ ë‚ ì”¨ ì¡°ì–¸**:
  - ë‹¨ìˆœížˆ í˜„ìž¬ ë‚ ì”¨ë§Œ ì–¸ê¸‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‚¬ìš©ìžì˜ **ê³¼ê±° ë°ì´í„°(ë™ì¼ ë‚ ì”¨ì—ì„œì˜ ê°ì • íŒ¨í„´)**ë¥¼ ë¶„ì„í•˜ì—¬ "ì§€ë‚œë²ˆ íë¦° ë‚ ì—ëŠ” ì´ëŸ° ê°ì •ì„ ëŠë¼ì…¨ëŠ”ë°, ì˜¤ëŠ˜ì€ ì–´ë– ì„¸ìš”?"ì™€ ê°™ì€ ì´ˆê°œì¸í™”ëœ ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- **í”„ë¼ì´ë²„ì‹œ ì‹¤ë“œ(Privacy Shield)**:
  - ì™¸ë¶€ API ì „ì†¡ ì „ ì´ë©”ì¼, ì „í™”ë²ˆí˜¸ ë“± ë¯¼ê° ì •ë³´ë¥¼ ìžë™ìœ¼ë¡œ ë§ˆìŠ¤í‚¹í•˜ê³ , ìµœì†Œí•œì˜ ë§¥ë½ ì •ë³´ë§Œ ì¶”ì¶œí•˜ì—¬ ë³´ì•ˆì„ ê°•í™”í–ˆìŠµë‹ˆë‹¤.
- **ì„¤ì • ë° ì‹¤í–‰**:
  - `.env` íŒŒì¼ì— `GEMINI_API_KEY` ì„¤ì • ì‹œ ìµœì í™” ëª¨ë“œê°€ ìžë™ í™œì„±í™”ë©ë‹ˆë‹¤.
  - ì¶”ì²œ ì‹¤í–‰ ë°©ì‹ (OCI): `nohup ./venv/bin/python app.py > app.log 2>&1 &`
