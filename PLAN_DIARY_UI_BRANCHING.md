# [기획서] 중증도 기반 맞춤형 작성 UI (Phase 1 고도화)

## 1. 개요

PHQ-9 설문 결과로 분류된 `risk_level`에 따라, **일기 작성 화면(Diary Write UI)**을 차별화하여 사용자에게 최적화된 경험을 제공합니다.

> **핵심 철학**:
>
> - **경증(Stable)**에게는 "긍정 강화"와 "성장"을.
> - **중증(Risk)**에게는 "세심한 관찰"과 "안전"을.

---

## 2. 모드별 UI 구성 비교

| 구분          | 그린 케어 (Green Care)                    | 레드 케어 (Red Care)                                   |
| :------------ | :---------------------------------------- | :----------------------------------------------------- |
| **대상**      | `risk_level` 1~2 (안정/경증)              | `risk_level` 3~5 (중등도/중증)                         |
| **테마 컬러** | 🟢 밝은 그린/블루 (활력, 희망)            | 🟠 차분한 베이지/오렌지 (안정, 위로)                   |
| **핵심 질문** | "오늘 있었던 **작은 행복**은 무엇인가요?" | "오늘 하루, **컨디션**은 어떠셨나요?"                  |
| **수면 체크** | 간단한 시간 입력                          | 수면 질(Quality) + 기상 시 기분 상세 체크              |
| **신체 증상** | 없음 (감정 위주)                          | **신체화 증상 체크리스트** (두통, 소화불량, 무기력 등) |
| **감정 기록** | 긍정/부정 감정 선택                       | **감정 강도(Intensity) 슬라이더** (1~10) 추가          |
| **마무리**    | "내일의 목표" or "감사 일기"              | "나를 위한 한마디" or "안전 계획 점검"                 |

---

## 3. 상세 기능 명세

### 3.1 공통 기능

- **날짜/날씨**: 기존과 동일.
- **음성 기록**: 모든 모드 지원.
- **기본 감정 선택**: 이모지(Emoji) 선택.

### 3.2 그린 케어 (Green Mode)

- **UI 목표**: 사용자가 긍정적인 요소를 발견하도록 유도.
- **질문 구성**:
  1. **Positive Event**: "오늘 가장 기억에 남는, 혹은 즐거웠던 일은?"
  2. **Self-Praise**: "오늘 나를 칭찬해준다면?"
- **AI 피드백**: "작은 성취를 축하해요!", "멋진 하루였네요!" 톤.

### 3.3 레드 케어 (Red Mode)

- **UI 목표**: 증상 변화를 추적하고, 위험 신호를 조기에 포착.
- **질문 구성**:
  1. **Physical Check**: "몸에 불편한 곳은 없었나요?" (체크박스: 불면, 식욕부진, 두통 등)
  2. **Mood Detail**: "우울감의 깊이는 어느 정도였나요?" (Slider 1~10)
  3. **Safety Check**: (고위험군일 경우) "혹시 부정적인 충동이 들지는 않았나요?" (Yes/No)
- **AI 피드백**: "힘든 하루였군요. 곁에 있어 드릴게요.", "전문가의 도움이 필요하면 언제든 말씀하세요." 톤.

---

## 4. 데이터 구조 변경 (Backend)

`diaries` 컬렉션에 다음 필드를 확장합니다.

```json
{
  "mode": "green" | "red",
  "symptoms": ["insomnia", "headache"], // Red Mode only
  "mood_intensity": 7, // Red Mode (1-10)
  "gratitude_note": "맛있는 커피를 마셨다", // Green Mode
  "safety_flag": false // Red Mode (Self-harm impulse check)
}
```

## 5. 구현 로드맵

1. **Frontend**: `DiaryModal.vue` 내 `risk_level`에 따른 `v-if` 분기 처리.
2. **Backend**: 데이터 저장 로직 수정 (추가 필드 허용).
3. **Validation**: 레드 모드에서 위험 신호 감지 시, 기존 Phase 3의 '안전망(SOS)' 로직과 연동.

---

이 계획대로 진행하시겠습니까? (승인 시 즉시 구현 시작)
